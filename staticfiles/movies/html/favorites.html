{% extends "base.html" %}

{% block title %}Мои избранные фильмы – Kino Catalog{% endblock %}

{% block content %}
<section class="section favorites-page">
    <div class="section__header">
        <h2>Мои избранные фильмы</h2>
        <div class="favorites-sort">
            <span>Сортировать:</span>
            <a href="?sort=title" class="{% if current_sort == 'title' %}active-sort{% endif %}">
                Название ↑
            </a>
            <a href="?sort=-title" class="{% if current_sort == '-title' %}active-sort{% endif %}">
                Название ↓
            </a>
            <a href="?sort=year" class="{% if current_sort == 'year' %}active-sort{% endif %}">
                Год ↑
            </a>
            <a href="?sort=-year" class="{% if current_sort == '-year' %}active-sort{% endif %}">
                Год ↓
            </a>
        </div>
    </div>

    {% if movies %}
        <div class="favorites-grid">
            {% for m in movies %}
                <div class="fav-card">
                    <a href="{% url 'detail' m.imdb_id %}" class="fav-card__poster-link">
                        {% if m.poster_url %}
                            <img src="{{ m.poster_url }}" alt="{{ m.title }}" class="fav-card__poster">
                        {% else %}
                            <div class="fav-card__poster fav-card__poster--placeholder">Нет постера</div>
                        {% endif %}
                    </a>
                    <div class="fav-card__info">
                        <h3 class="fav-card__title">{{ m.title }}</h3>
                        <p class="fav-card__year">{{ m.year }}</p>

                        <div class="fav-card__actions">
                            <a class="btn-secondary btn-secondary--small"
                               href="{% url 'detail' m.imdb_id %}">
                                Подробнее
                            </a>
                            <a class="btn-ghost btn-ghost--danger"
                               href="{% url 'remove_fav' m.imdb_id %}">
                                Удалить
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="favorites-empty">
            У тебя пока нет избранных фильмов. Найди фильм на главной и добавь его в избранное ★
        </p>
    {% endif %}
</section>
{% endblock %}
